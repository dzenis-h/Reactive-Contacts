(this["webpackJsonpreactive-contacts"]=this["webpackJsonpreactive-contacts"]||[]).push([[0],{14:function(e,t,a){e.exports={navbar:"Navbar_navbar__2APwt","nav-links":"Navbar_nav-links__2o0Wo",selected:"Navbar_selected__2z5Ae",logout:"Navbar_logout__305a0",name:"Navbar_name__2CwkV",hide:"Navbar_hide__2US_l","logout-icon":"Navbar_logout-icon__wjdB4",title:"Navbar_title__2lYiQ"}},17:function(e,t,a){e.exports={"grid-2":"ContactsItem_grid-2__3qXWe",card:"ContactsItem_card__hmy1t",icons:"ContactsItem_icons__3pfUF",type:"ContactsItem_type__1eyei"}},21:function(e,t,a){e.exports={register:"Register_register__15kpu"}},26:function(e,t,a){e.exports={ContactsForm:"ContactsForm_ContactsForm__3_Op-"}},37:function(e,t,a){e.exports={container:"App_container__3Owip"}},39:function(e,t,a){e.exports={Home:"Home_Home__3m47L"}},40:function(e,t,a){e.exports={list:"ContactsList_list__1V3i5"}},71:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(36),r=a.n(c),s=a(37),o=a.n(s),i=a(14),l=a.n(i),u=a(15),j=a(5),b=a.n(j),d=a(13),p=a(7),O=a(2),h="ADD_CONTACT",m="REMOVE_CONTACT",f="UPDATE_CONTACT",x="REGISTER_USER",v="LOGIN_USER",g="GET_USER",C="LOGOUT_USER",y="GET_CONTACTS",_="FILTER_CONTACTS",k="CLEAR_FILTER",N=a(8),w=a.n(N),E=a(0),F=Object(n.createContext)({token:null,isAuth:null,user:null,register:function(e){},login:function(e){},getUser:function(e){},logout:function(){}}),A={token:localStorage.getItem("token"),isAuth:null!==localStorage.getItem("token"),user:null},S=function(e,t){switch(t.type){case x:return localStorage.setItem("token",t.payload.token),Object(O.a)(Object(O.a)({},e),{},{isAuth:!0,token:t.payload.token});case v:return localStorage.setItem("token",t.payload.token),Object(O.a)(Object(O.a)({},e),{},{isAuth:!0,token:t.payload});case g:return Object(O.a)(Object(O.a)({},e),{},{user:t.payload,isAuth:!0,token:e.token});case C:return localStorage.removeItem("token"),Object(O.a)(Object(O.a)({},e),{},{user:null,isAuth:null,token:null});default:return e}},T=function(e){var t=Object(n.useReducer)(S,A),a=Object(p.a)(t,2),c=a[0],r=a[1],s={headers:{"Content-Type":"application/json"}},o=function(){var e=Object(d.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/users",t,s);case 2:a=e.sent,n=a.data,r({type:x,payload:n}),l(n.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/auth",t,s);case 2:a=e.sent,n=a.data,r({type:v,payload:n}),l(n.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=Object(n.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.a.defaults.headers.common["x-auth-token"]=t,e.next=3,w.a.get("/api/auth");case 3:a=e.sent,n=a.data,r({type:g,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),u={token:c.token,isAuth:c.isAuth,user:c.user,register:o,login:i,logout:function(){r({type:C})},getUser:l};return Object(E.jsx)(F.Provider,{value:u,children:e.children})},R=function(){var e=Object(n.useContext)(F),t=e.logout,a=e.isAuth,c=e.user,r=e.token,s=e.getUser;return Object(n.useEffect)((function(){a&&s(localStorage.token)}),[r,a,s]),Object(E.jsx)(n.Fragment,{children:Object(E.jsxs)("div",{className:l.a.navbar,children:[Object(E.jsxs)(u.b,{to:"/",children:[Object(E.jsx)("i",{className:"far fa-address-book fa-2x"}),Object(E.jsx)("p",{className:l.a.title,children:"Reactive Contacts"})]}),Object(E.jsx)("div",{className:l.a["nav-links"],children:a?Object(E.jsxs)(n.Fragment,{children:[Object(E.jsxs)("p",{className:l.a.name,children:[Object(E.jsx)("i",{className:"far fa-hand-peace"}),"Hello, ",c&&c.name]}),Object(E.jsx)("p",{children:Object(E.jsxs)("a",{href:"#!",onClick:t,className:l.a.logout,children:[Object(E.jsx)("i",{className:"fas fa-sign-out-alt logout-icon"}),Object(E.jsx)("span",{className:l.a.hide,children:"Logout"})]})})]}):Object(E.jsxs)(n.Fragment,{children:[Object(E.jsx)("p",{children:Object(E.jsxs)(u.c,{to:"/register",activeClassName:l.a.selected,children:["Register ","  "]})}),Object(E.jsx)("p",{children:Object(E.jsx)(u.c,{to:"/login",activeClassName:l.a.selected,children:"Login"})})]})})]})})},I=a(12),P=a(26),U=a.n(P),D=a(41),L=function(e){e?w.a.defaults.headers.common["x-auth-token"]=e:delete w.a.defaults.headers.common["x-auth-token"]},q=Object(n.createContext)({contacts:[],filtered:[],addContect:function(e){},removeContact:function(e){},updateContact:function(e,t){},getContacts:function(){},filterContacts:function(e){},clearFiltered:function(){}}),G={contacts:[],filtered:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var a=e.contacts.concat(t.payload);return Object(O.a)(Object(O.a)({},e),{},{contacts:a});case y:return Object(O.a)(Object(O.a)({},e),{},{contacts:t.payload});case m:var n=e.contacts.filter((function(e){return e._id!==t.payload}));return Object(O.a)(Object(O.a)({},e),{},{contacts:n});case f:var c=e.contacts.findIndex((function(e){return e._id===t.payload.id})),r=e.contacts[c];r=t.payload.newData;var s=Object(D.a)(e.contacts);return s[c]=r,Object(O.a)(Object(O.a)({},e),{},{contacts:s});case _:var o=e.contacts.filter((function(e){console.log(t.payload);var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)}));return Object(O.a)(Object(O.a)({},e),{},{filtered:o});case k:return Object(O.a)(Object(O.a)({},e),{},{filtered:null});default:return e}},V={headers:{"Content-Type":"application/json"}},W=function(e){var t=Object(n.useReducer)(H,G),a=Object(p.a)(t,2),c=a[0],r=a[1],s=Object(n.useCallback)(Object(d.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(localStorage.token),e.next=3,w.a.get("api/contacts");case 3:t=e.sent,a=t.data,r({type:y,payload:a});case 6:case"end":return e.stop()}}),e)}))),[]),o=function(){var e=Object(d.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(localStorage.token),e.next=3,w.a.post("api/contacts",t,V);case 3:a=e.sent,n=a.data,r({type:h,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("api/contacts/".concat(t));case 2:r({type:m,payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(d.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("api/contacts/".concat(t),a,V);case 2:r({type:f,payload:{id:t,newData:a}});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),u=Object(n.useCallback)((function(){r({type:k})}),[]),j={contacts:c.contacts,filtered:c.filtered,addContect:o,removeContact:i,updateContact:l,getContacts:s,filterContacts:function(e){r({type:_,payload:e})},clearFiltered:u};return Object(E.jsx)(q.Provider,{value:j,children:e.children})},B=a(73),J=function(e){var t=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),a=Object(p.a)(t,2),c=a[0],r=a[1],s=Object(n.useContext)(q).addContect,o=c.name,i=c.phone,l=c.email,u=c.type,j=function(e){r(Object(O.a)(Object(O.a)({},c),{},Object(I.a)({},e.target.name,e.target.value)))};return Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(Object(O.a)({id:Object(B.a)()},c)),r({name:"",email:"",phone:"",type:"personal"})},className:U.a.ContactsForm,children:[Object(E.jsx)("label",{htmlFor:o,children:Object(E.jsx)("b",{children:"Name:"})}),Object(E.jsx)("input",{name:"name",type:"text",value:o,onChange:j,id:"name",required:!0}),Object(E.jsx)("label",{htmlFor:l,children:Object(E.jsx)("b",{children:"Email:"})}),Object(E.jsx)("input",{name:"email",type:"email",value:l,onChange:j,id:"email",required:!0}),Object(E.jsx)("label",{htmlFor:i,children:Object(E.jsx)("b",{children:"Phone:"})}),Object(E.jsx)("input",{name:"phone",type:"text",value:i,onChange:j,id:"phone",required:!0}),Object(E.jsx)("label",{htmlFor:u,children:Object(E.jsx)("b",{children:"Type:"})}),Object(E.jsxs)("div",{className:U.a.type,children:[Object(E.jsx)("input",{name:"type",type:"radio",value:"personal",onChange:j,id:"personal",checked:"personal"===u})," ","Personal",Object(E.jsx)("input",{name:"type",type:"radio",value:"professional",onChange:j,id:"professional",checked:"professional"===u})," ","Professional"]}),Object(E.jsx)("button",{children:"Add Contact"})]})},M=a(39),z=a.n(M),Q=a(17),X=a.n(Q),Y=function(e){var t=e.contact,a=t.name,c=t.phone,r=t.email,s=t.type,o=t._id,i=Object(n.useState)(!1),l=Object(p.a)(i,2),u=l[0],j=l[1],b=Object(n.useState)({_id:o,name:a,email:r,phone:c,type:s}),d=Object(p.a)(b,2),h=d[0],m=d[1],f=Object(n.useContext)(q),x=f.removeContact,v=f.updateContact,g=function(e){m(Object(O.a)(Object(O.a)({},h),{},Object(I.a)({},e.target.name,e.target.value)))};return Object(E.jsx)("div",{className:X.a["grid-2"],children:Object(E.jsx)("div",{className:X.a.card,children:Object(E.jsxs)("ul",{children:[Object(E.jsxs)("li",{children:[Object(E.jsx)("i",{className:"fas fa-file-signature"})," ","  ","Name:"," ",Object(E.jsx)("span",{children:a})," ",Object(E.jsx)("br",{}),u&&Object(E.jsx)("input",{value:h.name,onChange:g,name:"name"})]}),Object(E.jsxs)("li",{className:X.a.icons,children:[Object(E.jsx)("i",{className:"fas fa-mobile-alt"})," ","  ","Phone: ","  ",Object(E.jsx)("span",{children:c})," ",Object(E.jsx)("br",{}),u&&Object(E.jsx)("input",{value:h.phone,onChange:g,name:"phone"})]}),Object(E.jsxs)("li",{className:X.a.icon,children:[Object(E.jsx)("i",{className:"far fa-envelope"}),"  "," E-mail:",Object(E.jsx)("span",{children:r}),Object(E.jsx)("br",{}),u&&Object(E.jsx)("input",{value:h.email,onChange:g,name:"email"})]}),Object(E.jsxs)("li",{children:[Object(E.jsx)("i",{className:"far fa-address-card"})," Type:"," ",Object(E.jsx)("b",{className:X.a.type,children:s})," ",Object(E.jsx)("br",{}),u&&Object(E.jsxs)(n.Fragment,{children:[Object(E.jsx)("input",{name:"type",type:"radio",value:"personal",onChange:g,id:"personal",checked:"personal"===h.type})," ","Personal",Object(E.jsx)("input",{name:"type",type:"radio",value:"professional",onChange:g,id:"professional",checked:"professional"===h.type})," ","Professional"]})]}),u?Object(E.jsx)("button",{onClick:function(){return e=o,t=h,j(!u),void v(e,t);var e,t},children:"Update"}):Object(E.jsxs)("li",{children:[Object(E.jsx)("button",{onClick:function(){x(o)},children:"DELETE"}),Object(E.jsx)("button",{onClick:function(){return j(!0)},children:"EDIT"})]})]})})})},K=a(40),Z=a.n(K),$=function(){var e=Object(n.useContext)(q),t=e.contacts,a=e.getContacts,c=e.filtered,r=e.filterContacts,s=e.clearFiltered,o=Object(n.useContext)(F).isAuth,i=Object(n.useRef)("");Object(n.useEffect)((function(){o&&a(),""===i.current.value&&s()}),[o,a,s]);var l=null!==c?c.map((function(e){return Object(E.jsx)(Y,{contact:e},e._id)})):t.map((function(e){return Object(E.jsx)(Y,{contact:e},e._id)}));return Object(E.jsxs)("div",{className:Z.a.list,children:[Object(E.jsx)("label",{htmlFor:"filter",children:"Filter contacts:"}),Object(E.jsx)("input",{ref:i,name:"filter",onChange:function(e){""!==i.current.value?r(e.target.value):s()}}),l]})},ee=a(3),te=function(){var e=Object(n.useContext)(F).isAuth;return Object(E.jsx)("div",{className:z.a.Home,children:e?Object(E.jsxs)(n.Fragment,{children:[Object(E.jsx)(J,{}),Object(E.jsx)($,{})]}):Object(E.jsx)(ee.a,{to:"/login"})})},ae=a(21),ne=a.n(ae),ce=function(e){var t=e.history,a=Object(n.useContext)(F),c=a.register,r=a.isAuth,s=Object(n.useState)({name:"",email:"",password:"",confirmPassword:""}),o=Object(p.a)(s,2),i=o[0],l=o[1];Object(n.useEffect)((function(){r&&t.push("/")}),[r,t]);var u=function(e){l(Object(O.a)(Object(O.a)({},i),{},Object(I.a)({},e.target.name,e.target.value)))},j=i.name,b=i.email,d=i.password,h=i.confirmPassword;return Object(E.jsxs)("form",{className:ne.a.register,onSubmit:function(e){e.preventDefault(),d===h?c(i):alert("PASSWORDS DO NOT MATCH")},children:[Object(E.jsx)("h4",{children:"Register a User"}),Object(E.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(E.jsx)("input",{name:"name",value:j,onChange:u,required:!0}),Object(E.jsx)("label",{htmlFor:"email",children:"E-mail:"}),Object(E.jsx)("input",{name:"email",type:"email",value:b,onChange:u,required:!0}),Object(E.jsx)("label",{htmlFor:"name",children:"Password:"}),Object(E.jsx)("input",{name:"password",value:d,onChange:u,type:"password",required:!0}),Object(E.jsx)("label",{htmlFor:"name",children:"Confirm Password:"}),Object(E.jsx)("input",{name:"confirmPassword",value:h,onChange:u,type:"password",required:!0}),Object(E.jsx)("button",{children:"Register"})]})},re=function(e){var t=e.history,a=Object(n.useContext)(F),c=a.login,r=a.isAuth,s=Object(n.useState)({email:"",password:""}),o=Object(p.a)(s,2),i=o[0],l=o[1];Object(n.useEffect)((function(){r&&t.push("/")}),[r,t]);var u=function(e){l(Object(O.a)(Object(O.a)({},i),{},Object(I.a)({},e.target.name,e.target.value)))},j=i.email,b=i.password;return Object(E.jsxs)("form",{className:ne.a.register,onSubmit:function(e){e.preventDefault(),c(i)},children:[Object(E.jsx)("h4",{children:"LOGIN"}),Object(E.jsx)("label",{htmlFor:"email",children:"E-mail:"}),Object(E.jsx)("input",{name:"email",type:"email",value:j,onChange:u,required:!0}),Object(E.jsx)("label",{htmlFor:"name",children:"Password:"}),Object(E.jsx)("input",{name:"password",value:b,onChange:u,type:"password",required:!0}),Object(E.jsx)("button",{children:"Login"})]})};var se=function(){return Object(E.jsx)(n.Fragment,{children:Object(E.jsx)(T,{children:Object(E.jsx)(W,{children:Object(E.jsxs)(u.a,{children:[Object(E.jsx)(R,{}),Object(E.jsx)("div",{className:o.a.container}),Object(E.jsx)(ee.b,{exact:!0,path:"/",component:te}),Object(E.jsxs)(ee.d,{children:[Object(E.jsx)(ee.b,{exact:!0,path:"/register",component:ce}),Object(E.jsx)(ee.b,{exact:!0,path:"/login",component:re})]})]})})})})};r.a.render(Object(E.jsx)(se,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.33377e42.chunk.js.map